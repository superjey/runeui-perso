!function(a){"use strict";"function"==typeof define&&define.amd?define(a):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=a():window.Sortable=a()}(function(){"use strict";function x(a,b){this.el=a,this.options=b=b||{},b.group=b.group||Math.random(),b.handle=b.handle||null,b.draggable=b.draggable||a.children[0]&&a.children[0].nodeName||(/[uo]l/i.test(a.nodeName)?"li":"*"),b.ghostClass=b.ghostClass||"sortable-ghost",b.onAdd=y(this,b.onAdd||u),b.onUpdate=y(this,b.onUpdate||u),b.onRemove=y(this,b.onRemove||u),a[n]=b.group;for(var c in this)"_"===c.charAt(0)&&(this[c]=y(this,this[c]));B(a,"add",b.onAdd),B(a,"update",b.onUpdate),B(a,"remove",b.onRemove),B(a,"mousedown",this._onTapStart),B(a,"touchstart",this._onTouchStartIsScroll),B(a,"touchmove",this._onTouchMoveIsScroll),B(a,"touchend",this._onTouchEndIsScroll),r&&B(a,"selectstart",this._onTapStart),B(a,"dragover",this._onDragOver),B(a,"dragenter",this._onDragOver),w.push(this._onDragOver)}function y(a,b){var c=v.call(arguments,2);return b.bind?b.bind.apply(b,[a].concat(c)):function(){return b.apply(a,c.concat(v.call(arguments)))}}function z(a,b,c){if("*"===b)return a;if(a){c=c||p,b=b.split(".");var d=b.shift().toUpperCase(),e=new RegExp("\\s("+b.join("|")+")\\s","g");do if(!(""!==d&&a.nodeName!=d||b.length&&((" "+a.className+" ").match(e)||[]).length!=b.length))return a;while(a!==c&&(a=a.parentNode))}return null}function A(a){a.dataTransfer.dropEffect="move",a.preventDefault()}function B(a,b,c){a.addEventListener(b,c,!1)}function C(a,b,c){a.removeEventListener(b,c,!1)}function D(a,b,c){if(a)if(a.classList)a.classList[c?"add":"remove"](b);else{var d=(" "+a.className+" ").replace(/\s+/g," ").replace(" "+b+" ","");a.className=d+(c?" "+b:"")}}function E(a,b,c){if(a&&a.style){if(void 0===c)return p.defaultView&&p.defaultView.getComputedStyle?c=p.defaultView.getComputedStyle(a,""):a.currentStyle&&(c=a.currentStyle),void 0===b?c:c[b];a.style[b]=c+("string"==typeof c?"":"px")}}function F(a,b,c){if(a){var d=a.getElementsByTagName(b),e=0,f=d.length;if(c)for(;f>e;e++)c(d[e],e);return d}return[]}function G(a){return a.draggable=!1}function H(){s=!1}function I(a,b){var c=a.lastElementChild.getBoundingClientRect();return b.clientY-(c.top+c.height)>5}var a,b,c,d,e,f,g,h,i,j,n="Sortable"+(new Date).getTime(),o=window,p=o.document,q=o.parseInt,r=!!p.createElement("div").dragDrop,s=!1,t=function(a,b){var c=p.createEvent("Event");return c.initEvent(a,!0,!0),c.item=b,c},u=function(){},v=[].slice,w=[];return x.prototype={constructor:x,_applyEffects:function(){D(a,this.options.ghostClass,!0)},_onTouchEndIsScroll:function(){this.touchIsScroll=!1,this.touchStartFired=!1,clearTimeout(this.touchEvtTimeout)},_onTouchMoveIsScroll:function(a){this.touchIsScroll=!0,this.touchStartFired&&a.preventDefault(),clearTimeout(this.touchEvtTimeout)},_onTouchStartIsScroll:function(a){clearTimeout(this.touchEvtTimeout);var b=this;this.touchEvtTimeout=setTimeout(function(){b.touchIsScroll||(b.touchStartFired=!0,b._onTapStart(a))},500)},_onTapStart:function(b){var c=b.touches&&b.touches[0],d=(c||b).target,e=this.options,f=this.el;if(e.handle&&(d=z(d,e.handle,f)),d=z(d,e.draggable,f),d&&"selectstart"==b.type&&"A"!=d.tagName&&"IMG"!=d.tagName&&d.dragDrop(),d&&!a&&d.parentNode===f){i=b,d.draggable=!0,F(d,"a",G),F(d,"img",G),c&&(i={target:d,clientX:c.clientX,clientY:c.clientY},this._onDragStart(i,!0),b.preventDefault()),B(this.el,"dragstart",this._onDragStart),B(this.el,"dragend",this._onDrop),B(p,"dragover",A);try{p.selection?p.selection.empty():window.getSelection().removeAllRanges()}catch(g){}}},_emulateDragOver:function(){if(j){E(b,"display","none");var a=p.elementFromPoint(j.clientX,j.clientY),c=a,d=this.options.group,e=w.length;if(c)do{if(c[n]===d){for(;e--;)w[e]({clientX:j.clientX,clientY:j.clientY,target:a,rootEl:c});break}a=c}while(c=c.parentNode);E(b,"display","")}},_onTouchMove:function(a){if(i){var c=a.touches[0],d=c.clientX-i.clientX,e=c.clientY-i.clientY;j=c,E(b,"webkitTransform","translate3d("+d+"px,"+e+"px,0)")}},_onDragStart:function(e,f){var g=e.target,i=e.dataTransfer;if(c=this.el,a=g,d=g.nextSibling,h=this.options.group,f){var l,j=g.getBoundingClientRect(),k=E(g);b=g.cloneNode(!0),E(b,"top",j.top-q(k.marginTop,10)),E(b,"left",j.left-q(k.marginLeft,10)),E(b,"width",j.width),E(b,"height",j.height),E(b,"opacity","0.8"),E(b,"position","fixed"),E(b,"zIndex","100000"),c.appendChild(b),l=b.getBoundingClientRect(),E(b,"width",2*j.width-l.width),E(b,"height",2*j.height-l.height),B(p,"touchmove",this._onTouchMove),B(p,"touchend",this._onDrop),this._loopId=setInterval(this._emulateDragOver,150)}else i.effectAllowed="move",i.setData("Text",g.textContent),B(p,"drop",this._onDrop);setTimeout(this._applyEffects)},_onDragOver:function(c){if(!s&&h===this.options.group&&(void 0===c.rootEl||c.rootEl===this.el)){var d=this.el,i=z(c.target,this.options.draggable,d);if(0===d.children.length||d.children[0]===b||d===c.target&&I(d,c))d.appendChild(a);else if(i&&i!==a&&void 0!==i.parentNode[n]){e!==i&&(e=i,f=E(i),g=i.getBoundingClientRect());var t,j=g,k=j.right-j.left,l=j.bottom-j.top,m=/left|right|inline/.test(f.cssFloat+f.display),o=(m?(c.clientX-j.left)/k:(c.clientY-j.top)/l)>.5,p=i.offsetWidth>a.offsetWidth,q=i.offsetHeight>a.offsetHeight,r=i.nextSibling;s=!0,setTimeout(H,30),t=m?i.previousElementSibling===a&&!p||o>.5&&p:i.nextElementSibling!==a&&!q||o>.5&&q,t&&!r?d.appendChild(a):i.parentNode.insertBefore(a,t?r:i)}}},_onDrop:function(g){clearInterval(this._loopId),C(p,"drop",this._onDrop),C(p,"dragover",A),C(this.el,"dragend",this._onDrop),C(this.el,"dragstart",this._onDragStart),C(this.el,"selectstart",this._onTapStart),C(p,"touchmove",this._onTouchMove),C(p,"touchend",this._onDrop),g&&(g.preventDefault(),g.stopPropagation(),b&&b.parentNode.removeChild(b),a&&(G(a),D(a,this.options.ghostClass,!1),c.contains(a)?a.nextSibling!==d&&a.dispatchEvent(t("update",a)):(c.dispatchEvent(t("remove",a)),a.dispatchEvent(t("add",a)))),c=a=b=d=i=j=e=f=h=null)},destroy:function(){var a=this.el,b=this.options;C(a,"add",b.onAdd),C(a,"update",b.onUpdate),C(a,"remove",b.onRemove),C(a,"mousedown",this._onTapStart),C(a,"touchstart",this._onTapStart),C(a,"selectstart",this._onTapStart),C(a,"dragover",this._onDragOver),C(a,"dragenter",this._onDragOver),Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")}),w.splice(w.indexOf(this._onDragOver),1),this._onDrop(),this.el=null}},x.utils={on:B,off:C,css:E,find:F,bind:y,closest:z,toggleClass:D},x.version="0.1.9",x});